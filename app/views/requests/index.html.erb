<p id="notice"><%= notice %></p>

<div class="page_title">
  <h1>Requêtes</h1>
</div>
<div class="panel">
  <table class="table">
    <thead>
      <tr>
        <th>Titre</th>
        <th>Description</th>
        <th>Fichiers</th>
        <th colspan="3"></th>
      </tr>
    </thead>
  
    <tbody>
      <% @requests.each do |request| %>
        <tr class="<%= cycle('list_line_odd', 'list_line_even') %>">
          <% if can? :update && :destroy && :read, request %>
            <td><%= request.title %></td>
            <td><%= request.description %></td>
            <td>
              <% request.fichiers.each do |fichier| %>
                <p> <%= link_to(fichier.chemin, fichier) %> </p>
              <% end %>
            </td>
            <td><%= link_to 'Show', request %></td>
            <td><%= link_to 'Edit', edit_request_path(request) %></td>
            <td><%= link_to 'Destroy', request, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
<br>

<% if can? :manage, @request %>
  <%= link_to 'Nouvelle Requête', new_request_path %>
<% end %>